<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | withme's blog</title>
<meta name=keywords content><meta name=description content="Posts - withme's blog"><meta name=author content="withme"><link rel=canonical href=https://blog.withme.top/posts/><meta name=google-site-verification content="G-P3Z1RE78CQ"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://blog.withme.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.withme.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.withme.top/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.withme.top/apple-touch-icon.png><link rel=mask-icon href=https://blog.withme.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.withme.top/posts/index.xml><link rel=alternate hreflang=zh-cn href=https://blog.withme.top/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://blog.withme.top/posts/"><meta property="og:site_name" content="withme's blog"><meta property="og:title" content="Posts"><meta property="og:description" content="happy life"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content="happy life"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.withme.top/posts/"}]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.withme.top/ accesskey=h title="withme (Alt + H)">withme</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Ssh Hugo</h2></header><div class=entry-content><p>summary hugo is a popular static site builder.We need to edit the site file in markdown format in our computer.When we want to publish our site,we need to push the code to the remote computer.So that,for convenience,I write a bash script to automatically complete the task.
code In the below code,I run the cloudflared,because my remote host has only ipv6,and my virtual machine can’t access the ipv6 network conveniently.Through cloudflared,I use it to get achieve an effect like proxy.
...</p></div><footer class=entry-footer><span title='2025-04-25 00:00:00 +0000 UTC'>2025-04-25</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;379 words&nbsp;·&nbsp;withme</footer><a class=entry-link aria-label="post link to Ssh Hugo" href=https://blog.withme.top/posts/ssh-hugo/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>cloudflared</h2></header><div class=entry-content><p>summary cloudflared is a tool launched by the greatest cdn company wordwide cloudflare.It can map out the ports which are stricted in the private network.
usage We need to login on cloudflare zero trust panel https://one.dash.cloudflare.com/ after we have a account and host one of our domains on it.
After some easy setting on the website,we can get a toke with very long length to config in the remote machine which is a certificate of our account.The next step is to run on machine.
...</p></div><footer class=entry-footer><span title='2025-04-24 00:00:00 +0000 UTC'>2025-04-24</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;123 words&nbsp;·&nbsp;withme</footer><a class=entry-link aria-label="post link to cloudflared" href=https://blog.withme.top/posts/cloudflared/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>linux socks5</h2></header><div class=entry-content><p>summary In the cloud machine,I usually need to download many big files which are on other country.In that situation,the download speed is very slow.Therefore,I need to use the proxy on the cloud machine.The most popular network protocol to use is socks5.How to let the program to use the socks5?A tool named proxychains is very convenient to use in system like debian.
installation 1 apt install proxychains config you need to edit a file /etc/proxychains.conf using text editor like vim , code.Write the below sentence on it.
...</p></div><footer class=entry-footer><span title='2025-04-24 00:00:00 +0000 UTC'>2025-04-24</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;96 words&nbsp;·&nbsp;withme</footer><a class=entry-link aria-label="post link to linux socks5" href=https://blog.withme.top/posts/linux-socks5/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>linux swap</h2></header><div class=entry-content><p>summary linux swap is a method to use the hard disk as running memory.By the method,we can run program that needs much memory on the machine that lacks much memory.
example In an azure virtual machine which only has 1G running memory,the popular website builder named Halo can’t run on it.Because the memory is not enough.Halo is written in java,so that Halo is a program which has a strict requirements for memory.Not to mention,I like to run mysql which is a popular database program on the same machine.Anyway,when I tried to run both of them,the machine is stuck and I can’t control it by ssh.In the last,I have to reboot it by the panel supported by azure.
...</p></div><footer class=entry-footer><span title='2025-04-24 00:00:00 +0000 UTC'>2025-04-24</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;197 words&nbsp;·&nbsp;withme</footer><a class=entry-link aria-label="post link to linux swap" href=https://blog.withme.top/posts/linux-swap/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>linux常见操作</h2></header><div class=entry-content><p>概述 linux是一个生产环境常用的系统，和windows,macos都是一个档次的，它一般在服务器环境中使用，我们学习如何使用linux，了解如何在上面部署服务，是一件很有用，很快乐的事情。
安装java java有两种，一个是甲骨文的，一个是openjdk的，前者不能免费使用，后者可以。我们在学习过程中推荐使用后者。openjdk在本篇文章编辑时已经更新到了24了，我们最好紧跟更新版本，使用最新的技术。
linux安装java的方法就是下载可执行文件，把bin目录添加到环境变量。
openjdk的下载页面地址在https://jdk.java.net/,比如24版本的下载页面地址是https://jdk.java.net/24/。本文编辑时的linux amd64下载链接是https://download.java.net/java/GA/jdk24.0.1/24a58e0e276943138bf3e963e6291ac2/9/GPL/openjdk-24.0.1_linux-x64_bin.tar.gz
安装python linux系统本身就自带了python3，在命令行输入python3 -V，就可以看到版本号了，但是这个python是系统的python，最好不要动，一般情况也不允许动。我们可以使用venv这个库建立一个虚拟环境，作为我们使用的python环境。搭建虚拟环境命令是python -m venv &lt;虚拟环境位置>，可能使用的python版本比较精简，没有venv，我们需要安装，一般会提示安装哪个包，一般是python3-venv，我们按需安装就好。最后把python的虚拟环境添加到环境变量，一般是当前目录和Script目录。
可能没有pip，一方面，可以apt安装python3-pip，看能不能安装，如果不行，就使用pip官方的方法。https://pip.pypa.io/en/stable/installation/。这是pip官方安装方法的网址。我一般喜欢下载https://bootstrap.pypa.io/get-pip.pyget-pip.py，然后执行就好。
安装golang 一般情况下，linux的golang编写的程序在自己的本地虚拟机编译，然后把可执行文件转移到生产环境，所以我们需要学会怎么安装golang。https://go.dev/dl/是golang的安装目录，我们下载对应的系统和cpu架构，下载解压就好，最好不要把目录设置成用户下的go文件夹，因为这个位置是放用户的golang的包的，不是放golang程序的。本文编辑时的linux amd64安装链接是https://go.dev/dl/go1.24.2.linux-amd64.tar.gz。下载解压后把bin目录添加到环境变量就好。
安装nodejs 和上面的一样，都是在官网下载可执行文件，解压到一个文件夹，然后添加环境变量。https://nodejs.org/zh-cn/download是下载页面。https://nodejs.org/dist/v22.14.0/node-v22.14.0-linux-x64.tar.xz是本文编辑时的最新的linux amd64下载链接。
安装docker 我一般使用debian 12这个版本，所以我也只会这个版本，我们到官网文档就可以安装安装教程。https://docs.docker.com/engine/install/debian/是官方的安装教程页面。我把代码贴到下面。
卸载旧的docker
1 for pkg in docker.io docker-doc docker-compose podman-docker containerd runc; do sudo apt-get remove $pkg; done 添加安装源
1 2 3 4 5 6 7 8 9 10 11 12 # Add Docker's official GPG key: sudo apt-get update sudo apt-get install ca-certificates curl sudo install -m 0755 -d /etc/apt/keyrings sudo curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc sudo chmod a+r /etc/apt/keyrings/docker.asc # Add the repository to Apt sources: echo \ "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \ $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \ sudo tee /etc/apt/sources.list.d/docker.list > /dev/null sudo apt-get update 安装
...</p></div><footer class=entry-footer><span title='2025-04-20 19:00:00 +0800 CST'>2025-04-20</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;158 words&nbsp;·&nbsp;withme</footer><a class=entry-link aria-label="post link to linux常见操作" href=https://blog.withme.top/posts/linux-operation/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>cf cache 配置</h2></header><div class=entry-content><p>概述 cloudflare是全球最大的网络公司，提供cdn等服务，吸引用户的一大亮点是它提供不限流量的cdn。和其他先用后收费的公司相比，使用它的cdn不会造成天价账单。凭借它遍布全球的cdn节点，全球到它的距离都很短。我们部署网站可以使用cf的cdn。可以加快用户访问，减轻源服务器压力。cf可以配置强制缓存，我们可以通过这个方式实现静态全站缓存。我的博客网站为了实现稳定性，已经部署到了cf的pages上面，更方便使用它的cdn。配置缓存规则时，我喜欢用主机名来筛选，配置边缘缓存时间为1年，实现某个站点全站缓存，但是为了更新网站时可以清除缓存，我需要点击清除缓存，实在时不方便，于是，我看了cf api的文档，它提供了清除缓存的api，我们可以通过python和cmd写个脚本，更新网站后运行这个脚本就可以清除缓存了。
脚本内容 python负责主要逻辑。
1 2 3 4 5 6 7 8 9 10 11 12 import os from cloudflare import Cloudflare client = Cloudflare( api_email="&lt;账户邮箱>", api_key="&lt;全局api>", ) response = client.cache.purge( zone_id="&lt;地区id>", hosts=["&lt;域名>"] ) print(response.id) cmd负责点击运行
1 2 python &lt;python脚本位置> pause</p></div><footer class=entry-footer><span title='2025-04-20 00:00:00 +0000 UTC'>2025-04-20</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;42 words&nbsp;·&nbsp;withme</footer><a class=entry-link aria-label="post link to cf cache 配置" href=https://blog.withme.top/posts/cf-cache/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>hugo papermod 配置</h2></header><div class=entry-content><p>概述 搭建自己的博客很有成就感，虽然自己很少写文章。但是在搭建过程可以享受快乐。出于稳定性和速度，我选择使用hugo生成静态博客，在cloudflare pages上部署，加上cloudflare的强制cdn缓存。以下是我的配置，供参考。
不足之处 cloudflare在国内的部分地区连接失败，其他大多地区倒是很绿。少数地区我就不管它了。
配置文件 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 # url前缀 baseURL: "https://blog.withme.top/" # 题目 title: "withme's blog" # 主题 theme: PaperMod # 语言 defaultContentLanguage: zh-cn # 允许爬虫 enableRobotsTXT: true # 不发布草稿 未来的 过期的 buildDrafts: false buildFuture: false buildExpired: false # 文章里面可以写表情包 enableEmoji: true # 构建时清除文件夹 cleanDestinationDir: true # 底部自定义版权声明 copyright: 版权归 withme.top 所有 minify: # xml不压缩 disableXML: true # html等压缩 minifyOutput: true params: # 底部留言 footer: text: 热爱生活 # 是的google分析等有用 env: production # html 标题 title: "withme's blog" # html描述 description: "happy life" # html关键字 keywords: [blog] # 文章作者 author: withme # 日期格式 DateFormat: "2006-01-02" # 默认颜色 defaultTheme: dark # 允许改变颜色 disableThemeToggle: false # 显示阅读时间 ShowReadingTime: true # 不显示分享按钮 ShowShareButtons: false # 不显示面包屑 ShowBreadCrumbs: false # 代码块有复制按钮 ShowCodeCopyButtons: true # 显示文章字数 ShowWordCount: true # 第一篇文章特别显示 disableSpecial1stPost: true # 点击回到头部 disableScrollToTop: false # 关闭评论 comments: false # 显示目录 showtoc: true # toc是否自动打开 tocopen: false assets: # 语法高亮 disableHLJS: false # 给css文件添加hash值 disableFingerprinting: true # favicon favicon: /favicon.ico # 左上角 label: #文字 text: "withme" # papermod配置首页模式 homeInfoParams: Title: "你好 \U0001F44B" Content: 欢迎来到我的博客 # 社交icon socialIcons: - name: github url: "https://github.com/0031400" # google分析 analytics: google: SiteVerificationTag: "G-P3Z1RE78CQ" # 嵌入css类 使用自定义主题 pygmentsUseClasses: true markup: highlight: # 每行要不要加个锚点 anchorLineNos: false # 猜测语言类型 guessSyntax: true # 行号 lineNos: true # 风格 style: github</p></div><footer class=entry-footer><span title='2025-04-20 00:00:00 +0000 UTC'>2025-04-20</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;305 words&nbsp;·&nbsp;withme</footer><a class=entry-link aria-label="post link to hugo papermod 配置" href=https://blog.withme.top/posts/hugo-config/></a></article></main><footer class=footer><span>版权归 withme.top 所有</span> ·
热爱生活 ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>